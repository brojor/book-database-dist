(function(t){function e(e){for(var i,s,r=e[0],c=e[1],l=e[2],u=0,h=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&h.push(n[s][0]),n[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);d&&d(e);while(h.length)h.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var t,e=0;e<a.length;e++){for(var o=a[e],i=!0,r=1;r<o.length;r++){var c=o[r];0!==n[c]&&(i=!1)}i&&(a.splice(e--,1),t=s(s.s=o[0]))}return t}var i={},n={app:0},a=[];function s(e){if(i[e])return i[e].exports;var o=i[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=i,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(o,i,function(e){return t[e]}.bind(null,i));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/book-database-dist/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;a.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var i=o("85ec"),n=o.n(i);n.a},2326:function(t,e,o){"use strict";var i=o("919d"),n=o.n(i);n.a},"3ece":function(t,e,o){},"43ce":function(t,e,o){"use strict";var i=o("b188"),n=o.n(i);n.a},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var i=o("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"fixed"},[i("img",{attrs:{alt:"logo",src:o("6b46")}}),i("SearchBar",{on:{searching:function(e){t.searching=e}}})],1),i("ul",t._l(t.sortedBooks,(function(e){return i("li",{key:e.id,class:{active:e.id==t.selectedBook.id},on:{click:function(o){return t.selectBook(e)}}},[e.id==t.selectedBook.id?i("i",{staticClass:"material-icons trash",on:{click:t.removeBook}},[t._v("delete")]):t._e(),i("div",{staticClass:"checkbox"},[e.id!=t.selectedBook.id||e.readed?t._e():i("i",{staticClass:"material-icons trash",on:{click:t.switchReaded}},[t._v("check_box_outline_blank")]),e.id==t.selectedBook.id&&e.readed?i("i",{staticClass:"material-icons trash",on:{click:t.switchReaded}},[t._v("check_box")]):t._e()]),e.id==t.selectedBook.id?i("i",{staticClass:"material-icons edit",on:{click:function(e){return t.editBook()}}},[t._v("edit")]):t._e(),t._v(" "+t._s(e.author)+" - "+t._s(e.title)+" "),e.readed?i("i",{staticClass:"material-icons check"},[t._v("check")]):t._e()])})),0),i("AddButton",{on:{clicked:t.modalAddBook}}),t.modal.show?i("MyModal",{attrs:{modalType:t.modal.type,activeBook:t.selectedBook},on:{closeModal:function(e){t.modal.show=!1},addNewBook:t.addNewBook,editBook:t.makeChangesInDb}}):t._e()],1)},a=[],s=(o("4de4"),o("caad"),o("2532"),o("2909")),r=o("bc3a"),c=o.n(r),l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("button",{staticClass:"add-book-button",on:{click:function(e){return t.$emit("clicked")}}},[o("i",{staticClass:"material-icons"},[t._v("add")])])},d=[],u={name:"AddButton",data:function(){return{}}},h=u,f=(o("8c5e"),o("2877")),m=Object(f["a"])(h,l,d,!1,null,"407a811b",null),p=m.exports,k=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"modal-bg",on:{click:t.clickedOutside}},[o("div",{staticClass:"modal"},[o("div",{staticClass:"modal-header"},[o("h2",[t._v(t._s(t.headerTitle))]),o("button",{staticClass:"close-button",on:{click:function(e){return t.$emit("closeModal")}}},[o("i",{staticClass:"material-icons"},[t._v("close")])])]),o("div",{staticClass:"modal-body"},[o("label",{attrs:{for:"author"}},[t._v("Autor:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.author,expression:"author"}],attrs:{type:"text",name:"author",autocomplete:"off"},domProps:{value:t.author},on:{input:function(e){e.target.composing||(t.author=e.target.value)}}}),o("label",{attrs:{for:"title"}},[t._v("Název knihy:")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",name:"title",autocomplete:"off"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}}),o("button",{staticClass:"submit-button",attrs:{type:"submit"},on:{click:function(e){return t.submitClicked()}}},[t._v(t._s(t.buttonTitle))])])])])},b=[],v=(o("498a"),{name:"MyModal",data:function(){return{author:"",title:"",headerTitle:"",buttonTitle:""}},created:function(){console.log("ted jsem byl vytvořen, tvůj modal"),"addBook"===this.modalType?(console.log("jsme v modu addBook"),this.headerTitle="Přidání knihy do databáze",this.buttonTitle="Přidat knihu",this.author="",this.title=""):"editBook"===this.modalType&&(console.log("jsme v modu editBook"),this.headerTitle="Upravit existující knihu",this.buttonTitle="Uložit změny",this.author=this.activeBook.author,this.title=this.activeBook.title)},methods:{submitClicked:function(){if(this.author&&this.title){var t={author:this.author.trim(),title:this.title.trim()};"addBook"===this.modalType?this.$emit("addNewBook",t):"editBook"===this.modalType&&(t.id=this.activeBook.id,this.$emit("editBook",t)),this.$emit("closeModal")}},clickedOutside:function(t){"modal-bg"==t.target.className&&this.$emit("closeModal")}},props:["modalType","activeBook"]}),y=v,g=(o("2326"),Object(f["a"])(y,k,b,!1,null,"23e14b20",null)),B=g.exports,_=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("form",{on:{submit:function(t){t.preventDefault()}}},[o("button",{staticClass:"switch",on:{click:t.SwitchTarget}},["title"==t.searchTarget?o("i",{staticClass:"material-icons"},[t._v("menu_book")]):o("i",{staticClass:"material-icons"},[t._v("person")])]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],attrs:{type:"text"},domProps:{value:t.searchText},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.search(e))},input:function(e){e.target.composing||(t.searchText=e.target.value)}}}),o("button",{staticClass:"search",attrs:{type:"submit"},on:{click:t.search}},[o("i",{staticClass:"material-icons"},[t._v("search")])])])},w=[],x={name:"SearchBar",data:function(){return{searchText:"",searchTarget:"author"}},methods:{search:function(){this.$emit("searching",{item:this.searchTarget,text:this.searchText}),this.searchText=""},SwitchTarget:function(){this.searchTarget="author"==this.searchTarget?"title":"author"}}},T=x,C=(o("43ce"),Object(f["a"])(T,_,w,!1,null,"30fddc83",null)),j=C.exports,O={name:"App",components:{MyModal:B,AddButton:p,SearchBar:j},data:function(){return{bookList:[],modal:{show:!1,type:""},selectedBook:{},searching:{item:"",text:""}}},computed:{filtredBooks:function(){var t=this;return this.searching.text?"author"==this.searching.item?this.bookList.filter((function(e){return e.author.toLowerCase().includes(t.searching.text.toLowerCase())})):this.bookList.filter((function(e){return e.title.toLowerCase().includes(t.searching.text.toLowerCase())})):this.bookList},sortedBooks:function(){var t=function(t,e){return function(o,i){return o[t]>i[t]?1:i[t]>o[t]?-1:o[e]>i[e]?1:-1}};return Object(s["a"])(this.filtredBooks).sort(t("author","title"))}},mounted:function(){this.getBookList()},methods:{getBookList:function(){var t=this;c.a.get("https://brojor.pythonanywhere.com/books").then((function(e){t.bookList=t.filteredList=e.data}))},addNewBook:function(t){var e=this;c()({method:"post",headers:{"Content-Type":"application/json"},url:"https://brojor.pythonanywhere.com/books",data:JSON.stringify(t)}).then((function(t){console.log(t),e.author="",e.title="",e.getBookList()}))},makeChangesInDb:function(t){var e=this;console.log(t),c()({method:"put",headers:{"Content-Type":"application/json"},url:"https://brojor.pythonanywhere.com/books/"+t.id,data:JSON.stringify(t)}).then((function(t){e.selectedBook=t.data,e.getBookList()}))},selectBook:function(t){console.log(t.id),"id"in this.selectedBook?this.selectedBook.id!=t.id&&(console.log("kliknuto, id NEEbylo prázdné"),this.selectedBook={}):(console.log("kliknuto, id bylo prázdné"),this.selectedBook=t)},removeBook:function(){var t=this;this.bookList=this.bookList.filter((function(e){return e.id!==t.selectedBook.id})),c()({method:"delete",url:"https://brojor.pythonanywhere.com/books/"+this.selectedBook.id}).then((function(t){console.log(t)}))},switchReaded:function(){var t=this.selectedBook.id,e=this.bookList.filter((function(e){return e.id==t}))[0],o=e.readed;c()({method:"put",headers:{"Content-Type":"application/json"},url:"https://brojor.pythonanywhere.com/books/"+t,data:JSON.stringify({readed:!o})}).then(e.readed=!o)},editBook:function(){console.log("edituji knihu"),this.modal.show=!0,this.modal.type="editBook"},modalAddBook:function(){this.modal.show=!0,this.modal.type="addBook"}}},L=O,M=(o("034f"),Object(f["a"])(L,n,a,!1,null,null,null)),N=M.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(N)}}).$mount("#app")},"6b46":function(t,e,o){t.exports=o.p+"img/6263.31aeb031.jpg"},"85ec":function(t,e,o){},"8c5e":function(t,e,o){"use strict";var i=o("3ece"),n=o.n(i);n.a},"919d":function(t,e,o){},b188:function(t,e,o){}});
//# sourceMappingURL=app.857ed0a6.js.map